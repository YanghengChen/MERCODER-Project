<!-- Template source: https://mdbootstrap.com/docs/standard/extended/login/ -->
<!DOCTYPE html>
<html lang="en">
<% var rootDir = process.cwd() %>

<head>
    <%- include(rootDir + '/views/partials/head'); %>
    <style>
        label {
            font-weight: bold;
        }
    </style>
</head>

<body style="padding-top: 80px;">
    <!-- Navbar -->
    <%- include(rootDir + '/views/partials/navbar'); %>

    <div class="text-center">
        <h1><%= newProblem ? "Create New Problem" : `Editing ${title}` %></h1>
    </div>

    <!-- Creation Form -->
    <div class="col-4 mx-auto mt-3">
        <form class="needs-validation" novalidate action=<%- newProblem ? "/problem/create" : `/problem/edit/${probID}` %> method="POST">
            <div class="form-group">
                <label for="title">Title</label>
                <input type="text" class="form-control" id="title" name="title" required
                <%- !newProblem ? `value="${title}"` : 'placeholder="Problem Title"' %>>
                <div class="invalid-feedback">
                    Please provide a problem title.
                </div>
            </div>
            <div class="form-group pt-2">
                <label for="description">Description</label>
                <textarea class="form-control" id="description" name="description" rows="5" required
                <%- !newProblem ? `>${description}` : 'placeholder="Problem description">' %></textarea>
                <div class="invalid-feedback">
                    Please provide a problem description.
                </div>
            </div>
            <div class="form-group pt-2">
                <label for="inputDesc">Description of Input</label>
                <textarea class="form-control" id="inputDesc" name="inputDesc" rows="2" required
                <%- !newProblem ? `>${inputDesc}` : 'placeholder="Input description">' %></textarea>
                <div class="invalid-feedback">
                    Please provide a description of input.
                </div>
            </div>
            <div class="form-group pt-2">
                <label for="outputDesc">Description of Output</label>
                <textarea class="form-control" id="outputDesc" name="outputDesc" rows="2" required
                <%- !newProblem ? `>${outputDesc}` : 'placeholder="Output description">' %></textarea>
                <div class="invalid-feedback">
                    Please provide a description of output.
                </div>
            </div>
            <div class="form-group pt-2">
                <label for="inputSample">Input Sample</label>
                <textarea class="form-control" id="inputSample" name="inputSample" rows="2" required
                <%- !newProblem ? `>${inputSample}` : 'placeholder="Sample input">' %></textarea>
                <div class="invalid-feedback">
                    Please provide an input sample.
                </div>
            </div>
            <div class="form-group pt-2">
                <label for="outputSample">Output Sample</label>
                <textarea class="form-control" id="outputSample" name="outputSample" rows="2" required
                <%- !newProblem ? `>${outputSample}` : 'placeholder="Sample Output">' %></textarea>
                <div class="invalid-feedback">
                    Please provide an output sample.
                </div>
            </div>
            <div class="form-group pt-2 pb-4">
                <label for="solutionLink">Solution Link</label>
                <input type="text" class="form-control" id="solutionLink" name="solutionLink" aria-describedby="solutionHelp" required
                <%- !newProblem ? `value="${solutionLink}"` : 'placeholder="Solution link (ex. https://replit.com/)"' %>>
                <div class="invalid-feedback">
                    Please provide a solution link.
                </div>
                <small id="solutionHelp" class="form-text text-muted">Must be a Replit link.</small>
            </div>
            <button type="submit" class="btn btn-primary"><%= newProblem ? "Create" : "Save" %> </button>
        </form>
    </div>

    <!-- MDB -->
    <script src="js/mdb.min.js"></script>

    <!-- Bootstrap Validation Script -->
    <script>
        (function () {
            'use strict'

            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.querySelectorAll('.needs-validation')

            // Loop over them and prevent submission
            Array.prototype.slice.call(forms)
                .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
                })
        })()
    </script>
</body>

</html>